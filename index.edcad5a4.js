(t=e||(e={})).UPDATE_STATE="UPDATE_STATE",t.RESET_STATE="RESET_STATE";var t,e,a=class{constructor(t,e=[]){this.state=t,this.initialState=t,this.listeners=new Set,this.middlewares=e}notify(){this.listeners.forEach(t=>t?.(this.state))}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}setState(t){this.state={...this.state,...t},this.notify()}getState(){return this.state}getActions(){return{updateState:t=>({type:e.UPDATE_STATE,payload:t}),resetState:()=>({type:e.RESET_STATE})}}dispatch(t){return new Promise((e,a)=>{this.middlewares.reduceRight((t,e)=>a=>e(this,t)(a),t=>{let n=this.applyAction(t);n&&a(n),e(this.getState())})(t)})}applyAction(t){switch(t.type){case e.UPDATE_STATE:this.setState(t.payload);break;case e.RESET_STATE:this.setState(this.initialState);break;default:return Error("Unknown action type")}}};const n=async t=>{let e=await fetch(t);if(!e.ok)throw Error(`Failed to fetch data from ${t}`);return e.json()},s=async()=>{try{let t=[],e=async a=>{let s=await n(a);t=[...t,...s.results],console.log(t);let i=s.next;if(i)return e(i)};await e("https://swapi.dev/api/planets");let a=t?.map(async t=>await r(t)?t:null);return(await Promise.all(a)).filter(t=>null!==t)}catch(t){return console.error("Error fetching planets:",t),[]}},i=async t=>{let e=t.species;if(e.length){let t=async t=>{let a=e[t];e.length;try{return await n(a),!0}catch(t){return null}};return await t(0)}return!1},r=async t=>{let e=t.residents;if(e.length){let t=async a=>{let s=e[a],r=a===e.length-1;try{let e=await n(s);return!!await i(e)||!r&&t(a+1)}catch(t){return null}};return await t(0)}return!1},l=new a({planets:[]},[]);l.subscribe(t=>{(function(t){let e=document.getElementById("planet-container");e.innerHTML="",t.forEach(t=>{let a=function(t){let e=document.createElement("div");e.className="bg-gray-800 p-4 rounded-lg shadow-lg flex items-center justify-between";let a=document.createElement("div");a.innerHTML=`
    <div class="text-yellow-500 text-sm">Planet.created</div>
    <div class="text-2xl font-bold">${t.name}</div>
    <div class="text-gray-400">${t.climate}</div>
    <div>${t.films.map(t=>t).join(", ")}</div>
  `;let n=document.createElement("div");return n.className="text-yellow-500 text-2xl",n.innerHTML='<i class="fas fa-toothbrush"></i>',e.appendChild(a),e.appendChild(n),e}(t);e.appendChild(a)})})(t.planets)}),s().then(t=>{console.log(t),l.dispatch(l.getActions().updateState({planets:t}))});
//# sourceMappingURL=index.edcad5a4.js.map
